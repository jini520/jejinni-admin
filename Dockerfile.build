# Admin Frontend 빌드용 Dockerfile
FROM node:20-alpine AS builder

WORKDIR /app

# package.json과 package-lock.json 복사 (의존성 캐시 활용)
COPY package*.json ./

# 의존성 설치
RUN npm install

# 소스 코드 복사
COPY . .

# 빌드 수행
RUN npm run build

# 빌드된 파일만 포함하는 최종 이미지
FROM alpine:latest

WORKDIR /app

# 빌드된 파일 복사
COPY --from=builder /app/dist ./dist

# 빌드된 파일을 볼륨에 복사하기 위한 명령
CMD ["sh", "-c", "cp -r /app/dist/* /output/"]

